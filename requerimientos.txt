üìë Especificaci√≥n Funcional del
Sistema - Se√±or Arroz
1. Funcionalidades Generales de la Aplicaci√≥n
‚Ä¢ Gesti√≥n de usuarios y roles: creaci√≥n, edici√≥n, desactivaci√≥n, asignaci√≥n de permisos,
autenticaci√≥n con JWT.
‚Ä¢ Gesti√≥n de sucursales: creaci√≥n y configuraci√≥n inicial, incluyendo impresoras y reglas
de fidelizaci√≥n.
‚Ä¢ Gesti√≥n de productos e inventario: categor√≠as por sucursal, productos con stock, costo,
precio, activaci√≥n/desactivaci√≥n.
‚Ä¢ Gesti√≥n de clientes y domicilios: registro de clientes, direcciones.
‚Ä¢ Pedidos: unificados con reservas, con estados, historial de cambios, detalles de
productos y fidelizaci√≥n aplicada.
‚Ä¢ M√≥dulo de domiciliarios: asignaci√≥n de pedidos, entrega y liquidaci√≥n de recaudos.
‚Ä¢ M√≥dulo de cocina: visualizaci√≥n y gesti√≥n de pedidos en preparaci√≥n.
‚Ä¢ Pagos y finanzas: m√∫ltiples m√©todos de pago(bancos y apps(app_payment  y bank payment , solo se puede una app por pedidos), el valor que no corresponda a bancos y apps sera efectivo), confirmaci√≥n de transferencias(pagos por banco),
liquidaci√≥n de apps(cuando una app payment se marca como isSettled, se crea un bank_payment con ese valor(se debe poder marcar multiples app_payments al tiempo creando un solo bank_payment) ), movimientos internos(movimientos de dinero entre bancos y entre caja-bancos utilizando bank_payment(income) y Expense_bank_payment(outcome)).
‚Ä¢ los app payment podran filtrarse por fecha y estado para liquidarse mas facil.
‚Ä¢ Se debe tener un resumen solo para el admin y el superadmin del dinero que debe tener cada banco y cada app basado en app_payment,bank_payment y Expense_bank_payment
‚Ä¢ Gastos: registro de proveedores, categor√≠as de gastos y facturas.
‚Ä¢ Caja y cuadre: apertura, cierre, evidencias y conciliaciones diarias.
‚Ä¢ Reportes y dashboard: m√©tricas de ventas, gastos, fidelizaci√≥n y desempe√±o por
sucursal.
El √∫nico rol que tiene acceso a todas las sucursales es el superadmin, los damas solo tendr√°n
acceso a datos y modificaciones de su sucursal.
ya se cuenta con los siguientes enums para manejo de la app
public enum ExpenseUnit
{
Unit, Kilo, Package, Pound, Gallon
}
public enum OrderStatus
{
Taken, // taken
InPreparation, // in_preparation
Ready, // ready
OnTheWay, // on_the_way
Delivered, // delivered
Cancelled // cancelled
}

public enum OrderType
{
Onsite, // onsite
Delivery, // delivery
Reservation // reservation
}
public enum UserRole
{
Superadmin, // superadmin
Admin, // admin
Cashier, // cashier
Kitchen, // kitchen
Deliveryman // deliveryman
}
2. Funciones y Permisos por Rol
Superadmin
‚Ä¢ Acceso total al sistema.
‚Ä¢ Crear usuarios de todos los roles.
‚Ä¢ Ver dashboard global y reportes de todas las sucursales.
Admin
‚Ä¢ Todo lo del cajero.
‚Ä¢ Crear/modificar productos, categor√≠as, usuarios de tipo cajero, cocina y domiciliario.
‚Ä¢ Cancelar pedidos y facturas (con motivo) .
‚Ä¢ Crear/editar bancos, apps, proveedores y gastos.
‚Ä¢ Liquidar apps y confirmar transferencias.
‚Ä¢ Ver dashboard de su sucursal.
Cajero
‚Ä¢ Crear/editar clientes y direcciones.
‚Ä¢ Crear/modificar pedidos (mientras no est√©n entregados/cancelados).
‚Ä¢ Asignar/desasignar domiciliarios a los pedidos siempre y cuando sean pedidos del
mismo dia.
‚Ä¢ Crear abonos parciales y liquidaciones de domiciliarios.
‚Ä¢ Hacer cuadre de caja.
Cocina
‚Ä¢ Ver pedidos en preparaci√≥n y reservas pr√≥ximas.

‚Ä¢ Cambiar pedidos a ‚ÄòReady.
‚Ä¢ Pedidos desaparecen de su vista al pasarlos.
Domiciliario
‚Ä¢ Ver pedidos en ‚ÄòReady‚Äôy los suyos propios.
‚Ä¢ Cambiar estado a ‚ÄòOnTheWay‚Äôo revertir entrega (3h m√°x).
‚Ä¢ Ver historial de pedidos y abonos.
3. Requerimientos y Reglas de Negocio
‚Ä¢ Debe existir solo 1 superadmin en el sistema y 1 admin/cocina por sucursal.
‚Ä¢ Pedidos delivery requieren cliente y direcci√≥n obligatoria.
‚Ä¢ Pedidos onsite pueden no tener cliente, pero se puede asignar para fidelizaci√≥n.
‚Ä¢ Pedidos de tipo reserva requieren fecha/hora de entrega obligatoria.
‚Ä¢ Cancelaci√≥n requiere motivo y no suma puntos de fidelizaci√≥n.
‚Ä¢ Fidelizaci√≥n se aplica seg√∫n loyalty_rule al momento de crear el pedido.
‚Ä¢ Pagos con app deben registrarse obligatoriamente.
‚Ä¢ Si no hay expense_bank_payment, el gasto es 100% en efectivo.
4. Interfaces Gr√°ficas por Rol
Superadmin
‚Ä¢ Dashboard global
‚Ä¢ Gesti√≥n de usuarios
‚Ä¢ Reportes globales.
Admin
‚Ä¢ Panel de control sucursal
‚Ä¢ Gesti√≥n de pedidos, clientes, productos y usuarios
‚Ä¢ Gesti√≥n de bancos, apps y gastos
‚Ä¢ Dashboard sucursal
Cajero
‚Ä¢ Pantalla de pedidos
‚Ä¢ Pantalla de clientes
‚Ä¢ Pantalla de domiciliarios
‚Ä¢ Cuadre de caja
‚Ä¢ Reporte b√°sico de ventas
Cocina
‚Ä¢ Vista simplificada de pedidos en preparaci√≥n
‚Ä¢ Cambio r√°pido de estado

Domiciliario
‚Ä¢ Lista de pedidos disponibles para ser entregados, en estado ‚Äòready‚Äô
‚Ä¢ Bot√≥n de entregar/revertir solo para pedidos que aplique
‚Ä¢ Historial de pedidos entregados
‚Ä¢ Resumen de abonos y liquidaciones
‚Ä¢ Dashboard con datos relevantes
‚Ä¢ Pedidos asignados en curso de entrega